{"version":3,"file":"CaseGroupHelper.js","names":["ActiveConstants","Active","ActiveModel","Color","Money","CaseGroupHelper","getNameByGroup","item","groupType","name","BY_TYPE","getActiveNameByType","BY_GROUP","getActiveNameByGroup","BY_ACCOUNT","getAccountNameByActive","BY_COMPANY","getActiveCompany","BY_NAME","getName","BY_CURRENCY","getActiveCurrency","BY_BOND_DATE","getBondDate","BY_BROKER_NAME","prepareSortedItems","actives","firstGroupType","sortedItems","activeIndex","map","isPackage","type_id","attributes","buy_trades","trade","key","id","indexOf","push","create","sell_trades","groupThreeLevels","secondGroupType","getNameFunc","index","indexSecond","indexThird","data","itemKey","firstName","secondName","subItemKey","length","valuation","subSubItemKey","parseFloat","groupFourLevels","thirdGroupType","colorIndex","subColorIndex","colors","color","thirdName","percent","factPercent","type","shortName","slice","format","group","sortCallback","sort"],"sources":["../../src/helpers/CaseGroupHelper.js"],"sourcesContent":["import ActiveConstants from \"../constants/ActiveConstants\"\r\nimport Active from \"../helpers/Active\"\r\nimport ActiveModel from \"../models/Active\"\r\nimport Color from \"../helpers/Color\"\r\nimport Money from \"../helpers/Money\"\r\n\r\nclass CaseGroupHelper\r\n{\r\n  static getNameByGroup(item, groupType)\r\n  {\r\n    let name = '';\r\n\r\n    if (groupType === ActiveConstants.BY_TYPE)\r\n    {\r\n      name = ActiveConstants.getActiveNameByType(item);\r\n    } else if (groupType === ActiveConstants.BY_GROUP)\r\n    {\r\n      name = ActiveConstants.getActiveNameByGroup(item);\r\n    } else if (groupType === ActiveConstants.BY_ACCOUNT)\r\n    {\r\n      name = ActiveConstants.getAccountNameByActive(item);\r\n    } else if (groupType === ActiveConstants.BY_COMPANY)\r\n    {\r\n      name = ActiveConstants.getActiveCompany(item);\r\n    } else if (groupType === ActiveConstants.BY_NAME)\r\n    {\r\n      name = Active.getName(item);\r\n    } else if (groupType === ActiveConstants.BY_CURRENCY)\r\n    {\r\n      name = ActiveConstants.getActiveCurrency(item);\r\n    } else if (groupType === ActiveConstants.BY_BOND_DATE)\r\n    {\r\n      name = ActiveConstants.getBondDate(item);\r\n    } else if (groupType === ActiveConstants.BY_BROKER_NAME)\r\n    {\r\n      name = ActiveConstants.getBondDate(item);\r\n    }\r\n\r\n    return name;\r\n  }\r\n\r\n  static prepareSortedItems(actives, firstGroupType)\r\n  {\r\n    let sortedItems = [];\r\n    let activeIndex = [];\r\n\r\n    actives.map((item) =>\r\n    {\r\n      if (ActiveConstants.isPackage(item.type_id))\r\n      {\r\n        item.attributes?.buy_trades?.map((trade) =>\r\n        {\r\n          let name = CaseGroupHelper.getNameByGroup(item, firstGroupType);\r\n\r\n          let key = item.id + name;\r\n\r\n          if (activeIndex.indexOf(key) === -1)\r\n          {\r\n            activeIndex.push(key);\r\n          }\r\n\r\n          if (typeof sortedItems[activeIndex.indexOf(key)] === 'undefined')\r\n          {\r\n            sortedItems[activeIndex.indexOf(key)] = ActiveModel.create({...item.attributes});\r\n\r\n            sortedItems[activeIndex.indexOf(key)].attributes.buy_trades = [];\r\n            sortedItems[activeIndex.indexOf(key)].attributes.sell_trades = [];\r\n          }\r\n\r\n          sortedItems[activeIndex.indexOf(key)].attributes.buy_trades.push({...trade});\r\n        });\r\n\r\n        item.attributes?.sell_trades?.map((trade) =>\r\n        {\r\n          let name = CaseGroupHelper.getNameByGroup(item, firstGroupType);\r\n\r\n          let key = item.id + name;\r\n\r\n          if (activeIndex.indexOf(key) === -1)\r\n          {\r\n            activeIndex.push(key);\r\n          }\r\n\r\n          if (typeof sortedItems[activeIndex.indexOf(key)] === 'undefined')\r\n          {\r\n            sortedItems[activeIndex.indexOf(key)] = ActiveModel.create({...item.attributes});\r\n\r\n            sortedItems[activeIndex.indexOf(key)].attributes.buy_trades = [];\r\n            sortedItems[activeIndex.indexOf(key)].attributes.sell_trades = [];\r\n          }\r\n\r\n          sortedItems[activeIndex.indexOf(key)].attributes.sell_trades.push({...trade});\r\n\r\n\r\n        });\r\n      } else\r\n      {\r\n        let name = CaseGroupHelper.getNameByGroup(item, firstGroupType);\r\n\r\n        let key = item.id + name + 'none';\r\n\r\n        if (activeIndex.indexOf(key) === -1)\r\n        {\r\n          activeIndex.push(key);\r\n        }\r\n\r\n        if (typeof sortedItems[activeIndex.indexOf(key)] === 'undefined')\r\n        {\r\n          sortedItems[activeIndex.indexOf(key)] = ActiveModel.create({...item.attributes});\r\n\r\n          sortedItems[activeIndex.indexOf(key)].attributes.buy_trades = [];\r\n          sortedItems[activeIndex.indexOf(key)].attributes.sell_trades = [];\r\n        }\r\n      }\r\n    });\r\n\r\n    return [sortedItems, activeIndex];\r\n  }\r\n\r\n  static groupThreeLevels(actives, firstGroupType, secondGroupType, getNameFunc)\r\n  {\r\n    let index = [];\r\n    let indexSecond = [];\r\n    let indexThird = [];\r\n    let data = [];\r\n\r\n    let [sortedItems, activeIndex] = CaseGroupHelper.prepareSortedItems(actives, firstGroupType)\r\n\r\n    sortedItems.map((item) =>\r\n    {\r\n      let name = CaseGroupHelper.getNameByGroup(item, firstGroupType);\r\n\r\n      if (index.indexOf(name) === -1)\r\n      {\r\n        index.push(name);\r\n\r\n        let itemKey = index.indexOf(name);\r\n\r\n        data[itemKey] = {};\r\n        data[itemKey]['name'] = name;\r\n        data[itemKey]['children'] = [];\r\n\r\n        indexSecond[itemKey] = [];\r\n        indexThird[itemKey] = [];\r\n      }\r\n    });\r\n\r\n    sortedItems.map((item) =>\r\n    {\r\n      let firstName = CaseGroupHelper.getNameByGroup(item, firstGroupType);\r\n      let secondName = CaseGroupHelper.getNameByGroup(item, secondGroupType);\r\n\r\n      if (index.indexOf(firstName) !== -1)\r\n      {\r\n\r\n        let itemKey = index.indexOf(firstName);\r\n\r\n        if (indexSecond[itemKey].indexOf(secondName) === -1)\r\n        {\r\n          indexSecond[itemKey].push(secondName);\r\n        }\r\n\r\n        let subItemKey = indexSecond[itemKey].indexOf(secondName);\r\n\r\n        data[itemKey]['children'][subItemKey] = {};\r\n        data[itemKey]['children'][subItemKey]['name'] = secondName;\r\n        data[itemKey]['children'][subItemKey]['children'] = [];\r\n\r\n        indexThird[itemKey][subItemKey] = [];\r\n      }\r\n    });\r\n\r\n    let key = index.length;\r\n    sortedItems.map((item) =>\r\n    {\r\n      let firstName = CaseGroupHelper.getNameByGroup(item, firstGroupType);\r\n      let secondName = CaseGroupHelper.getNameByGroup(item, secondGroupType);\r\n\r\n      if (item.valuation > 0)\r\n      {\r\n        let itemKey = index.indexOf(firstName);\r\n\r\n        let subItemKey = indexSecond[itemKey].indexOf(secondName);\r\n\r\n        let name = getNameFunc(item);\r\n\r\n        if (indexThird[itemKey][subItemKey].indexOf(name) === -1)\r\n        {\r\n          indexThird[itemKey][subItemKey].push(name);\r\n        }\r\n\r\n        let subSubItemKey = indexThird[itemKey][subItemKey].indexOf(name);\r\n\r\n        if (typeof data[itemKey]['children'][subItemKey]['children'][subSubItemKey] === 'undefined')\r\n        {\r\n          data[itemKey]['children'][subItemKey]['children'][subSubItemKey] = {}\r\n          data[itemKey]['children'][subItemKey]['children'][subSubItemKey]['name'] = name;\r\n          data[itemKey]['children'][subItemKey]['children'][subSubItemKey]['value'] = 0;\r\n        }\r\n\r\n        data[itemKey]['children'][subItemKey]['children'][subSubItemKey]['value'] += parseFloat(item.valuation)\r\n\r\n        key++;\r\n      }\r\n    })\r\n\r\n    return data;\r\n  }\r\n\r\n  static groupFourLevels(actives, firstGroupType, secondGroupType, thirdGroupType)\r\n  {\r\n    let index = [];\r\n    let indexSecond = [];\r\n    let data = [];\r\n\r\n    let [sortedItems, activeIndex] = CaseGroupHelper.prepareSortedItems(actives, firstGroupType)\r\n\r\n    let colorIndex = 0;\r\n    let subColorIndex = 0;\r\n    sortedItems.map((item) =>\r\n    {\r\n      let name = CaseGroupHelper.getNameByGroup(item, firstGroupType);\r\n\r\n      if (index.indexOf(name) === -1)\r\n      {\r\n        index.push(name);\r\n\r\n        let itemKey = index.indexOf(name);\r\n\r\n        data[itemKey] = {};\r\n        data[itemKey]['name'] = name;\r\n        data[itemKey]['type'] = 'group';\r\n        data[itemKey]['value1'] = 0;\r\n        data[itemKey]['value2'] = 0;\r\n        data[itemKey]['value3'] = 0;\r\n        data[itemKey]['value4'] = 0;\r\n\r\n        if (typeof Color.colors[colorIndex] === 'undefined')\r\n        {\r\n          colorIndex = 0;\r\n        }\r\n\r\n        data[itemKey]['colorIndex'] = colorIndex;\r\n        data[itemKey]['color'] = Color.colors[colorIndex].color;\r\n        colorIndex++;\r\n      }\r\n    });\r\n\r\n    sortedItems.map((item) =>\r\n    {\r\n      let name = CaseGroupHelper.getNameByGroup(item, secondGroupType);\r\n\r\n      if (index.indexOf(name) === -1)\r\n      {\r\n        index.push(name);\r\n\r\n        let itemKey = index.indexOf(name);\r\n\r\n        data[itemKey] = {};\r\n        data[itemKey]['name'] = name;\r\n        data[itemKey]['type'] = 'group';\r\n        data[itemKey]['value1'] = 0;\r\n        data[itemKey]['value2'] = 0;\r\n        data[itemKey]['value3'] = 0;\r\n        data[itemKey]['value4'] = 0;\r\n\r\n        if (typeof Color.colors[colorIndex] === 'undefined')\r\n        {\r\n          colorIndex = 0;\r\n        }\r\n\r\n        data[itemKey]['colorIndex'] = colorIndex;\r\n        // data[itemKey]['color'] = Color.colors[colorIndex].color;\r\n        // colorIndex++;\r\n      }\r\n    });\r\n\r\n    sortedItems.map((item) =>\r\n    {\r\n      let name = CaseGroupHelper.getNameByGroup(item, thirdGroupType);\r\n\r\n      if (index.indexOf(name) === -1)\r\n      {\r\n        index.push(name);\r\n\r\n        let itemKey = index.indexOf(name);\r\n\r\n        data[itemKey] = {};\r\n        data[itemKey]['name'] = name;\r\n        data[itemKey]['type'] = 'group';\r\n        data[itemKey]['value1'] = 0;\r\n        data[itemKey]['value2'] = 0;\r\n        data[itemKey]['value3'] = 0;\r\n        data[itemKey]['value4'] = 0;\r\n\r\n        if (typeof Color.colors[colorIndex] === 'undefined')\r\n        {\r\n          colorIndex = 0;\r\n        }\r\n\r\n        data[itemKey]['colorIndex'] = colorIndex;\r\n        // data[itemKey]['color'] = Color.colors[colorIndex].color;\r\n        // colorIndex++;\r\n      }\r\n    });\r\n\r\n    let key = index.length;\r\n    sortedItems.map((item) =>\r\n    {\r\n      let firstName = CaseGroupHelper.getNameByGroup(item, firstGroupType);\r\n      let secondName = CaseGroupHelper.getNameByGroup(item, secondGroupType);\r\n      let thirdName = CaseGroupHelper.getNameByGroup(item, thirdGroupType);\r\n\r\n      if (item.valuation > 0)\r\n      {\r\n        let percent = item.factPercent;\r\n\r\n        let type = Active.getName(item);\r\n        let shortName = type;\r\n        if (type.length > 38)\r\n        {\r\n          shortName = type.slice(0, 39) + '...';\r\n        }\r\n\r\n        data[key] = {};\r\n        data[key]['name'] = shortName + ' - дох.: ' + Money.format((percent - 1) * 100, 2, \".\", \"\") + '%';\r\n        data[key]['type'] = 'active';\r\n        data[key]['value1'] = parseFloat(item.valuation);\r\n        data[key]['value2'] = 0;\r\n        data[key]['value3'] = 0;\r\n\r\n        let itemKey = index.indexOf(thirdName);\r\n\r\n        data[itemKey]['value2'] += parseFloat(item.valuation);\r\n        // colorIndex = data[itemKey]['colorIndex'];\r\n\r\n        itemKey = index.indexOf(secondName);\r\n\r\n        data[itemKey]['value3'] += parseFloat(item.valuation);\r\n\r\n        itemKey = index.indexOf(firstName);\r\n\r\n        data[itemKey]['value4'] += parseFloat(item.valuation);\r\n        // colorIndex = data[itemKey]['colorIndex'];\r\n\r\n        // let color = Color.colors[colorIndex];\r\n\r\n\r\n        // if (typeof Color.colors[colorIndex].subColors[subColorIndex] === 'undefined') {\r\n        //   subColorIndex = 0;\r\n        // }\r\n        // data[key]['color'] = Color.colors[colorIndex].subColors[subColorIndex];\r\n        // subColorIndex++;\r\n\r\n        key++;\r\n      }\r\n    })\r\n\r\n    return data;\r\n  }\r\n\r\n  static group(actives, groupType, colors = Color.colors, sortCallback)\r\n  {\r\n    let index = [];\r\n    let data = [];\r\n\r\n    let sortedItems = [];\r\n    let activeIndex = [];\r\n\r\n    actives.map((item) =>\r\n    {\r\n      if (ActiveConstants.isPackage(item.type_id))\r\n      {\r\n        item.attributes?.buy_trades?.map((trade) =>\r\n        {\r\n          let name = CaseGroupHelper.getNameByGroup(item, groupType);\r\n\r\n          let key = item.id + name;\r\n\r\n          if (activeIndex.indexOf(key) === -1)\r\n          {\r\n            activeIndex.push(key);\r\n          }\r\n\r\n          if (typeof sortedItems[activeIndex.indexOf(key)] === 'undefined')\r\n          {\r\n            sortedItems[activeIndex.indexOf(key)] = ActiveModel.create({...item.attributes});\r\n\r\n            sortedItems[activeIndex.indexOf(key)].attributes.buy_trades = [];\r\n            sortedItems[activeIndex.indexOf(key)].attributes.sell_trades = [];\r\n          }\r\n\r\n          sortedItems[activeIndex.indexOf(key)].attributes.buy_trades.push({...trade});\r\n\r\n\r\n        });\r\n\r\n        item.attributes?.sell_trades?.map((trade) =>\r\n        {\r\n          let name = CaseGroupHelper.getNameByGroup(item, groupType);\r\n\r\n          let key = item.id + name;\r\n\r\n          if (activeIndex.indexOf(key) === -1)\r\n          {\r\n            activeIndex.push(key);\r\n          }\r\n\r\n          if (typeof sortedItems[activeIndex.indexOf(key)] === 'undefined')\r\n          {\r\n            sortedItems[activeIndex.indexOf(key)] = ActiveModel.create({...item.attributes});\r\n\r\n            sortedItems[activeIndex.indexOf(key)].attributes.buy_trades = [];\r\n            sortedItems[activeIndex.indexOf(key)].attributes.sell_trades = [];\r\n          }\r\n\r\n          sortedItems[activeIndex.indexOf(key)].attributes.sell_trades.push({...trade});\r\n\r\n\r\n        });\r\n      } else\r\n      {\r\n        let name = CaseGroupHelper.getNameByGroup(item, groupType);\r\n\r\n        let key = item.id + name + 'none';\r\n\r\n        if (activeIndex.indexOf(key) === -1)\r\n        {\r\n          activeIndex.push(key);\r\n        }\r\n\r\n        if (typeof sortedItems[activeIndex.indexOf(key)] === 'undefined')\r\n        {\r\n          sortedItems[activeIndex.indexOf(key)] = ActiveModel.create({...item.attributes});\r\n\r\n          sortedItems[activeIndex.indexOf(key)].attributes.buy_trades = [];\r\n          sortedItems[activeIndex.indexOf(key)].attributes.sell_trades = [];\r\n        }\r\n      }\r\n    });\r\n\r\n    let colorIndex = 0;\r\n    sortedItems.map((item) =>\r\n    {\r\n      let name = CaseGroupHelper.getNameByGroup(item, groupType);\r\n\r\n      if (index.indexOf(name) === -1)\r\n      {\r\n        index.push(name);\r\n      }\r\n\r\n      let itemKey = index.indexOf(name);\r\n\r\n      if (typeof data[itemKey] === 'undefined')\r\n      {\r\n        data[itemKey] = {};\r\n        data[itemKey]['name'] = name;\r\n        data[itemKey]['type'] = 'group';\r\n        data[itemKey]['value1'] = 0;\r\n        data[itemKey]['value2'] = 0;\r\n        data[itemKey]['value3'] = 0;\r\n      }\r\n\r\n      data[itemKey]['value1'] += parseFloat(item.valuation);\r\n    });\r\n\r\n    if(typeof sortCallback === 'function')\r\n    {\r\n      data = data.sort(sortCallback);\r\n    }\r\n\r\n    data.map((item) =>\r\n    {\r\n      if (typeof colors[colorIndex] === 'undefined')\r\n      {\r\n        colorIndex = 0;\r\n      }\r\n\r\n      item.colorIndex = colorIndex;\r\n      item.color = colors[colorIndex].color;\r\n      colorIndex++;\r\n\r\n      return item;\r\n    })\r\n\r\n    return data;\r\n  }\r\n}\r\n\r\n\r\nexport default CaseGroupHelper;\r\n"],"mappings":"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"}