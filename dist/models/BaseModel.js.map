{"version":3,"file":"BaseModel.js","names":["Api","BaseModel","attributes","related","controller","constructor","setGetters","id","x","create","load","array","map","item","getInstance","fetch","params","method","get","index","Object","defineProperty","set","e","console","warn","message","prop","value"],"sources":["../../src/models/BaseModel.js"],"sourcesContent":["import {Api} from \"laravel-request\";\r\n\r\nexport default class BaseModel\r\n{\r\n  /**\r\n   *\r\n   * @type {Array}\r\n   */\r\n  attributes = [];\r\n  /**\r\n   *\r\n   * @type {{}}\r\n   */\r\n  related = {};\r\n\r\n  /**\r\n   *\r\n   * @type {string}\r\n   */\r\n  controller = '';\r\n\r\n  /**\r\n   *\r\n   * @param {Array} attributes\r\n   */\r\n  constructor(attributes)\r\n  {\r\n    this.attributes = attributes;\r\n\r\n    this.setGetters(attributes);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {*}\r\n   */\r\n  get id()\r\n  {\r\n    return this.attributes.id;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param x\r\n   */\r\n  set id(x)\r\n  {\r\n    this.attributes.id = x;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param attributes\r\n   * @return {BaseModel}\r\n   */\r\n  static create(attributes)\r\n  {\r\n    return new this(attributes)\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param array\r\n   * @returns {*}\r\n   */\r\n  static load(array)\r\n  {\r\n    return array.map((item) =>\r\n    {\r\n      return this.create(item);\r\n    })\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {BaseModel}\r\n   */\r\n  static getInstance()\r\n  {\r\n    return new this();\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param params\r\n   * @return {*}\r\n   */\r\n  static fetch(params = {})\r\n  {\r\n    const method = 'index';\r\n\r\n    return Api.get(this.getInstance().controller, method, params)\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param attributes\r\n   * @return {*}\r\n   *\r\n   * в JavaScript, свойства дочернего класса инициализируются\r\n   * после вызова конструктора родительского класса.\r\n   * Это означает, что внутри конструктора родительского\r\n   * класса вы не сможете обратиться к свойствам, определенным в\r\n   * дочернем классе, потому что они еще не были созданы.\r\n   */\r\n  setGetters(attributes)\r\n  {\r\n    for (const index in attributes)\r\n    {\r\n      if (typeof this.related[index] !== 'undefined' || index === 'attributes' || index === 'related' || index === 'modelFields' || index === 'currencyFields')\r\n      {\r\n\r\n      } else\r\n      {\r\n        try\r\n        {\r\n          Object.defineProperty(this, index, {\r\n            get()\r\n            {\r\n              return this.attributes[index]\r\n            },\r\n            set(x)\r\n            {\r\n              this.attributes[index] = x;\r\n            },\r\n          });\r\n        } catch (e)\r\n        {\r\n          console.warn(e.message)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param prop\r\n   * @returns {*}\r\n   */\r\n  get(prop)\r\n  {\r\n    if (typeof this.attributes[prop] === \"undefined\")\r\n      return null;\r\n    else\r\n      return this.attributes[prop];\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param prop\r\n   * @param value\r\n   */\r\n  set(prop, value)\r\n  {\r\n    this.attributes[prop] = value;\r\n  }\r\n}\r\n"],"mappings":"AAAA,SAAQA,GAAG,QAAO,iBAAiB;AAEnC,eAAe,MAAMC,SAAS,CAC9B;EACE;AACF;AACA;AACA;EACEC,UAAU,GAAG,EAAE;EACf;AACF;AACA;AACA;EACEC,OAAO,GAAG,CAAC,CAAC;;EAEZ;AACF;AACA;AACA;EACEC,UAAU,GAAG,EAAE;;EAEf;AACF;AACA;AACA;EACEC,WAAWA,CAACH,UAAU,EACtB;IACE,IAAI,CAACA,UAAU,GAAGA,UAAU;IAE5B,IAAI,CAACI,UAAU,CAACJ,UAAU,CAAC;EAC7B;;EAEA;AACF;AACA;AACA;EACE,IAAIK,EAAEA,CAAA,EACN;IACE,OAAO,IAAI,CAACL,UAAU,CAACK,EAAE;EAC3B;;EAEA;AACF;AACA;AACA;EACE,IAAIA,EAAEA,CAACC,CAAC,EACR;IACE,IAAI,CAACN,UAAU,CAACK,EAAE,GAAGC,CAAC;EACxB;;EAEA;AACF;AACA;AACA;AACA;EACE,OAAOC,MAAMA,CAACP,UAAU,EACxB;IACE,OAAO,IAAI,IAAI,CAACA,UAAU,CAAC;EAC7B;;EAEA;AACF;AACA;AACA;AACA;EACE,OAAOQ,IAAIA,CAACC,KAAK,EACjB;IACE,OAAOA,KAAK,CAACC,GAAG,CAAEC,IAAI,IACtB;MACE,OAAO,IAAI,CAACJ,MAAM,CAACI,IAAI,CAAC;IAC1B,CAAC,CAAC;EACJ;;EAEA;AACF;AACA;AACA;EACE,OAAOC,WAAWA,CAAA,EAClB;IACE,OAAO,IAAI,IAAI,CAAC,CAAC;EACnB;;EAEA;AACF;AACA;AACA;AACA;EACE,OAAOC,KAAKA,CAACC,MAAM,GAAG,CAAC,CAAC,EACxB;IACE,MAAMC,MAAM,GAAG,OAAO;IAEtB,OAAOjB,GAAG,CAACkB,GAAG,CAAC,IAAI,CAACJ,WAAW,CAAC,CAAC,CAACV,UAAU,EAAEa,MAAM,EAAED,MAAM,CAAC;EAC/D;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEV,UAAUA,CAACJ,UAAU,EACrB;IACE,KAAK,MAAMiB,KAAK,IAAIjB,UAAU,EAC9B;MACE,IAAI,OAAO,IAAI,CAACC,OAAO,CAACgB,KAAK,CAAC,KAAK,WAAW,IAAIA,KAAK,KAAK,YAAY,IAAIA,KAAK,KAAK,SAAS,IAAIA,KAAK,KAAK,aAAa,IAAIA,KAAK,KAAK,gBAAgB,EACxJ,CAEA,CAAC,MACD;QACE,IACA;UACEC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEF,KAAK,EAAE;YACjCD,GAAGA,CAAA,EACH;cACE,OAAO,IAAI,CAAChB,UAAU,CAACiB,KAAK,CAAC;YAC/B,CAAC;YACDG,GAAGA,CAACd,CAAC,EACL;cACE,IAAI,CAACN,UAAU,CAACiB,KAAK,CAAC,GAAGX,CAAC;YAC5B;UACF,CAAC,CAAC;QACJ,CAAC,CAAC,OAAOe,CAAC,EACV;UACEC,OAAO,CAACC,IAAI,CAACF,CAAC,CAACG,OAAO,CAAC;QACzB;MACF;IACF;EACF;;EAEA;AACF;AACA;AACA;AACA;EACER,GAAGA,CAACS,IAAI,EACR;IACE,IAAI,OAAO,IAAI,CAACzB,UAAU,CAACyB,IAAI,CAAC,KAAK,WAAW,EAC9C,OAAO,IAAI,CAAC,KAEZ,OAAO,IAAI,CAACzB,UAAU,CAACyB,IAAI,CAAC;EAChC;;EAEA;AACF;AACA;AACA;AACA;EACEL,GAAGA,CAACK,IAAI,EAAEC,KAAK,EACf;IACE,IAAI,CAAC1B,UAAU,CAACyB,IAAI,CAAC,GAAGC,KAAK;EAC/B;AACF"}